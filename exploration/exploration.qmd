---
Title: Wendy Exploration MLE
author: Jack Krebsbach
format:
 typst:
    toc: true
    section-numbering: 1.1.a
---

# Wendy

Load libraries

```{r}
library(Rcpp)
library(symengine)
library(devtools)
```

## For local development sourcing cpp files

```{r}
unlink(tempdir(), recursive = TRUE)

Sys.setenv("PKG_CXXFLAGS" = paste(
    Rcpp:::CxxFlags(),
  "-std=c++20",
  "-I/opt/homebrew/include",
  "-I/opt/homebrew/include/eigen3",
  "-I/opt/homebrew/Caskroom/miniforge/base/envs/cling/include",  # <-- add this
  "-I/Users/krebsbach/ml/wendy/src/core/external/CppNumericalSolvers/include",
  "-I/Users/krebsbach/ml/wendy/src/core/external/exprtk/include",
  "-I/opt/homebrew/Caskroom/miniforge/base/include"
))

Sys.setenv("PKG_LIBS" = paste(
    Rcpp:::LdFlags(),
  "-L/opt/homebrew/lib",
  "-L/opt/homebrew/Caskroom/miniforge/base/",
  "-lsymengine -lflint -lgmp -lmpfr -lfmt -lfftw3"
))

source("R/example.R")

Rcpp::sourceCpp('exploration/pkg-dev.cpp')

WendySolver(du, U, 1.2*p_star, matrix(tt, ncol = 1))

```


## Build Package Locally

```{r}
print(getwd())
devtools::clean_dll()
devtools::document()
Rcpp::compileAttributes()
devtools::load_all()
```

## Try version from github

```{r}
devtools::install_github("jackkrebsbach/wendy.R", force = TRUE)
```

```{r}
library(WENDyMLE)
Rcpp::loadModule("WendyR")
w <- new(WendyR, du, U, p_hat, matrix(tt, ncol = 1))
w$build_test_function_matrices()
v_full <- w$getV()
```